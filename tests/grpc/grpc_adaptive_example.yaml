server:
  host: 0.0.0.0
  port: 18080
  log_level: drasi_server=info,drasi_core=warn
  max_connections: 1000
  shutdown_timeout_seconds: 30
  disable_persistence: true
sources:
- id: facilities-db
  source_type: grpc
  auto_start: true
  properties:
    keepalive_timeout_seconds: 10
    port: 50051
    max_connections: 100
    max_message_size: 8388608
    host: 0.0.0.0
    keepalive_interval_seconds: 10
queries:
- id: building-comfort
  query: |
    MATCH
      (r:Room)
    RETURN
      elementId(r) AS RoomId,
      r.temperature, r.humidity, r.co2
  sources:
  - facilities-db
  auto_start: true
  properties: {}
reactions:
- id: rooms-grpc-adaptive
  reaction_type: grpc_adaptive
  queries:
  - building-comfort
  auto_start: true
  properties:
    adaptive_enabled: true
    retry_delay_ms: 500
    tls:
      enabled: false
    adaptive_max_batch_size: 2000
    timeout_ms: 5000
    metadata:
      x-api-key: test-key-12345
      x-client-id: drasi-test
    adaptive_max_wait_ms: 100
    endpoint: http://127.0.0.1:50052
    adaptive_min_batch_size: 10
    adaptive_window_secs: 5
    keepalive:
      interval_seconds: 10
      timeout_seconds: 10
    adaptive_min_wait_ms: 1
    max_retries: 3
    compression: false
